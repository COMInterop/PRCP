# 1.4 LINKS AND RULES
#
# The first data track we will add are links. By using rules, which
# are expressions that are evaluated for every link, the formatting
# can be dynamically changed based on data values.
#
# I will also show you how to change the definition of colors, if you
# would like to assign different chromosome color scheme to your
# figure.

karyotype = prcp-chromos.txt
chromosomes_units = 1000000

chromosomes_display_default = no
chromosomes             = /.chr/
chromosomes_reverse     = /CP\.chr/
chromosomes_color_list = spectral-10-div
#chromosomes_scale           = hs1=0.5r,/hs[234]/=0.5rn
#chromosomes_radius          = hs4:0.9r

<plots>

#NBS coords

<plot>
type        = tile
file        = prcp-nlr-tps.circos
r1          = 0.99r
r0          = 0.90r
orientation = out
layers      = 12
margin      = 0.05u
thickness   = 12
padding     = 4
layers_overflow       = grow
layers_overflow_color = dred
stroke_thickness = 5
stroke_color     = black
color            = black

<rules>
<rule>
    condition    = var(id) =~ /NLR/
    stroke_color     = dred
    color      = dred
    flow         = continue
</rule>
<rule>
    condition    = var(id) =~ /TPS/
    stroke_color     = 29021a
    color      = 29021a
</rule>
</rules>
    
<backgrounds>
<background>
color = vvlyellow
</background>
</backgrounds>
</plot>

# Gene density track (Belser)
# You can generate the BED with gene-density.sh

<plot>
    type  = heatmap
    color = spectral-9-div-rev
    file  = prcp-gene-density.bed
    scale_log_base = 1
    show  = yes
    r1    = 0.89r
    r0    = 0.80r
</plot>

#Contig boundaries (per Belser)
# Use minimap to map contigs to chromos

<plot>
    type = tile
    file = prcp-contigs-2.bed
    r1   = 0.79r
    r0   = 0.70r
    layers = 2
    thickness = 55
    padding = 8
    color = vdblue
    stroke_color = vdblue
    stroke_thickness = 1
    show = yes   
</plot>

</plots>

#Synteny swoops

<links>

<link>
# Not translocations
file          = links-25k-no-tl.txt
radius        = 0.69r
bezier_radius = 0r
color         = 4e5359
thickness     = 3
</link>

<link>
# Translocations
file          = links-25k-tl-only.txt
radius        = 0.69r
bezier_radius = 0r
color         = 7fff00
thickness     = 3
z             = 1
</link>

</links>

<<include ideogram.conf>>
<<include ticks.conf>>

# --- FIXED IMAGE BLOCK (SVG only; avoids GD::Image->png crash) ---
<image>
file = circos-final
dir  = .

radius = 1500p
svg = yes
png = no

background = white
angle_offset = -90
auto_alpha_colors = yes
auto_alpha_steps  = 5
</image>
# ---------------------------------------------------------------

<<include etc/colors_fonts_patterns.conf>> 
<<include etc/housekeeping.conf>> 

data_out_of_range* = trim
